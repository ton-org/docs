---
title: "External Inbound Messages"
---

External messages are sent from outside the blockchain, so it is impossible to determine the sender. In cases where it is necessary to verify the sender, the public key is usually stored in the contract, and the message is signed before sending, so the contract can verify this signature with the public key. This is the approach used by all [wallets in the TON ecosystem](/standard/wallets/comparison).

## Contents of external messages

```tl-b
ext_in_msg_info$10 src:MsgAddressExt dest:MsgAddressInt
  import_fee:Grams = CommonMsgInfo;

message$_ {X:Type} info:CommonMsgInfo
  init:(Maybe (Either StateInit ^StateInit))
  body:(Either X ^X) = Message X;
```

The `CommonMsgInfo` of external-in messages contains the following fields:

- `src` — the address of the sender of the message.
- `dest` — the address of the contract that will receive the message.
- `import_fee` — the amount of Toncoin that the contract will pay for this message.

Due to the limitations described above, the value of these fields can be manipulated by [nodes](/ecosystem/node/overview) or [API providers](/ecosystem/api/overview) that deliver the message unless they are included in the signed payload. However, standard wallets do not include these fields in the signed payload. In that case, only the contents of the `body` field are signed.

The `import_fee` field can be overwritten by validators processing the messages. The price of delivering a message with `x` cells and `y` bits is predetermined, so any other value of `import_fee` will be overwritten.

## Deploying via external message

A contract can be deployed via an external message only if the newly deployed contract will accept that message after its creation. Of course, [as usual](/foundations/messages/state-init), the address of the contract must match the hash of the StateInit.

## Acceptance of a message

External-in messages are sent to the contract from outside the blockchain, so the sender can't pay for them, and these messages must be paid by the contract that receives them. However, if the contract paid for all external-in messages it receives, it would drain its balance. This is why the [`gas_credit` parameter](/foundations/limits#gas-and-fee-parameters) exists. It defines how much gas the contract can consume without paying for it, giving the contract a chance to decide whether it wants to accept the message and pay for it. A contract can't modify its state without accepting the message. If a contract accepts a message, it will pay for all gas consumed, even if it fits in `gas_credit`. Acceptance can be done using the [`ACCEPT`](/tvm/instructions#f800-accept) TVM instruction, or via the [`SETGASLIMIT`](/tvm/instructions#f801-setgaslimit) instruction with an argument greater than or equal to 2<sup>63</sup>-1. Acceptance of a message is a unique property of external-in messages.

## Replaying of messages

When an external-in message is sent to the blockchain, validators replay it. This means that a message sent once can be delivered to the contract multiple times. Normally, each external-in message should be accepted only once. Different techniques exist to achieve this goal, and they are used in various [wallets](/standard/wallets/comparison).
