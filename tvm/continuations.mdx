---
title: "Continuations"
description: "Continuation is a block of code executed in TVM"
---

## Ordinary continuation

Consists of:
- code slice (just a slice with instructions)
- control data
  - number of arguments
  - stack
  - saved registers
  - codepage

## Extraordinary continuations

### Quit

**TL-B**: `vmc_quit$1000 exit_code:int32 = VmCont`

Exits TVM with `exit_code`. During [initialization of TVM](./initialization), `c0` is set to `Quit(0)`, and `c1` to `Quit(1)`.

### ExcQuit

**TL-B**: `vmc_quit_exc$1001 = VmCont`

Default exception handler. Terminates TVM with exception code popped from stack. During [initialization of TVM](./initialization), `c2` is set to `ExcQuit`.

### PushInt

**TL-B**: `vmc_pushint$1111 value:int32 next:^VmCont = VmCont`

Pushes `value` on stack and jumps on `next`. This continuation only used in [`BOOLEVAL`](./instructions#edf9-booleval) instruction.

### Envelope

**TL-B**: `vmc_envelope$01 cdata:VmControlData next:^VmCont = VmCont`

Updates current VM state with `cdata` and jumps on `next`.

### Repeat

**TL-B**: `vmc_repeat$10100 count:uint63 body:^VmCont after:^VmCont = VmCont`

Executes `body` `count` times, then jumps to `after`. Under the hood, it just sets `body` `c0` to `Repeat(count - 1, body, after)` if `count > 0`, otherwise jumps to `after`. Used in [`REPEAT`](./instructions#e4-repeat) and variants.

### Again

**TL-B**: `vmc_again$110001 body:^VmCont = VmCont`

Executes `body` infinite times by setting `body` `c0` to `Again(body)`. Used in [`AGAIN`](./instructions#ea-again) and variants.

### Until

**TL-B**: `vmc_until$110000 body:^VmCont after:^VmCont = VmCont`

Pops bool from stack, jumps to `body` with `c0 = Until(body, after)` if bool is `false`, otherwise jumps to `after`. Used in [`UNTIL`](./instructions#e6-until) and variants.

### WhileCondition

**TL-B**: `vmc_while_cond$110010 cond:^VmCont body:^VmCont after:^VmCont = VmCont`

Pops bool from stack, jumps to `body` with `c0 = WhileBody(cond, body, after)` if bool is `true`, otherwise jumps to `after`. Used in [`WHILE`](./instructions#e8-while) and variants.

### WhileBody

**TL-B**: `vmc_while_body$110011 cond:^VmCont body:^VmCont after:^VmCont = VmCont`

Jumps to `cond` with `c0 = WhileCondition(cond, body, after)`. Used in [`WHILE`](./instructions#e8-while) and variants.