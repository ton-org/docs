---
title: "How to handle other events with WalletKit on the Web platform"
sidebarTitle: "Handle other events"
---

import { Aside } from '/snippets/aside.jsx';

<Aside>
  [Initialize the WalletKit](./init), [set up at least one TON wallet](./wallets) and [handle connection requests](./connections) before using examples on this page.
</Aside>

In total, there are five distinct kinds of incoming events from the TON Connect bridge. They form the corresponding requests and their handlers:

Incoming event      | WalletKit method to listen and process the request
------------------- | --------------------------------------------------
`connect`           | [`onConnectRequest()`](./connections#handle-onconnectrequest)
`restoreConnection` | [`onConnectRequest()`](./connections#handle-onconnectrequest)
`disconnect`        | [`onDisconnect()`](./connections#handle-ondisconnect)
`transaction`       | [`onTransactionRequest()`](#handle-ontransactionrequest)
`signData`          | [`onSignDataRequest()`](#handle-onsigndatarequest)

<Aside>
  Additionally, there is a generic event that can only be initiated directly from the bridge. It has the `method: 'none'` and its `params` record contains arbitrary values of type `Record<string, any>`.

  As of now, WalletKit does not provide a way to process such events.
</Aside>

## Handle `onTransactionRequest`

If a dApp is connected to the wallet service, the former can request to initiate a blockchain transaction, which fires the `transaction` request over the bridge. The wallet service then handles it with the `onTransactionRequest` method of the WalletKit.

```ts title="TypeScript"
// WIP: move example back here
```

## Handle `onSignDataRequest`

If a dApp is connected to the wallet service, the former can request to sign data with the private key used by the selected TON wallet, which fires the `transaction` request over the bridge. The wallet service then handles it with the `onTransactionRequest` method of the WalletKit.

The data to sign can be of several kinds: `text`, `binary`, or a raw [`cell`](/foundations/serialization/cells).

```ts title="TypeScript"
// WIP: move example back here
```

## Handle request errors

Upon any error in any of the requests, the `onRequestError()` method fires. Provide it with a callback function that would handle arbitrary errors and display useful information to the user or retry the failed action.

```ts title="TypeScript"
await kit.onRequestError(async (event) => {
  // To distinguish events, look for their corresponding method type:
  console.error(event.incomingEvent.method);

  // Incoming event can be one of the following types:
  // - connect (from onConnectRequest)
  // - restoreConnection (also from onConnectRequest)
  // - disconnect (from onDisconnect)
  // - transaction (from onTransactionRequest)
  // - signData (from onSignDataRequest)
  // - none (generic request error)
  console.error(event.incomingEvent);

  // The result is a following object:
  // {
  //   id: string,
  //   error: {
  //     code: number,
  //     message: string,
  //     data?: unknown,
  //   }
  // }
  console.error(event.result);
});
```

## Next steps

<Columns cols={2}>
  <Card
    title="Work with Toncoin"
    icon="gem"
    horizontal="true"
    href="/ecosystem/ton-connect/walletkit/web/toncoin"
  />
</Columns>

## See also

- [WalletKit overview](/ecosystem/ton-connect/walletkit)
- [TON Connect overview](/ecosystem/ton-connect)
