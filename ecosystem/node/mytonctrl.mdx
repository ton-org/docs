---
title: "MyTonCtrl reference"
description: "Scenario-based checklist for deploying TON nodes with MyTonCtrl."
---

MyTonCtrl is the TON Foundation's supported CLI wrapper around the validator toolchain. It orchestrates `lite-client`, `validator-engine-console`, MyTonInstaller, and wallet utilities so you can manage production nodes from a single shell. The steps below are organized by common operator goals so you can focus on the workflow you need. Cross-check the [node maintenance guidelines](https://docs.ton.org/guidelines/nodes-guidelines) for operational policies and security best practices.

:::warning Protect funds and keys
MyTonCtrl reads and exports validator wallets and key material. Back up secrets offline, avoid shared terminals, and rehearse new workflows on testnet before touching production funds.
:::

## Setting up a node

### Launch the console

Start every session by opening the interactive prompt:

```bash
mytonctrl
```

Helpful shortcuts once you are inside the console:

| Command | What it does |
| --- | --- |
| `help` | Show available commands in the current context. |
| `exit` | Leave the console. |
| `update [<REPO_OR_BRANCH>]` | Pull the latest MyTonCtrl code; set `<REPO_OR_BRANCH>` to a repo slug, fork path, or commit hash.
| `upgrade [<REPO_OR_BRANCH> [<BRANCH>]] [--btc-teleport [<BRANCH>] [-u <USER>]]` | Rebuild TON binaries from your chosen repository; use `<REPO_OR_BRANCH>`/`<BRANCH>` to pick sources and `<USER>` when compiling as another Linux user (append `--btc-teleport` to reinstall the helper).
| `rollback` | Roll back to the legacy MTC v1 layout (prompts before running migrations).
| `about <MODE>` | Show a mode description, enabled state, and per-mode settings for `<MODE>` such as `validator`, `liteserver`, or `nominator-pool`.

### Install the base services

Open the embedded installer from inside MyTonCtrl:

```bash
installer
```

Inside the installer shell, review the current state before making changes:

```bash
status
```

Enable the components your node needs:

```bash
enable FN
enable VC
enable JR
enable THA
enable PT
setwebpass
```

`FN` installs the full node binaries, `VC` enables validator console tooling, `JR` deploys the optional JSON-RPC service, `THA` adds ton-http-api, and `PT` exposes the Toncenter-compatible HTTP endpoint. Run `setwebpass` to set the password for the tonadmin.org web panel. Use uppercase codes (`FN`, `VC`, `LS`, `DS`, `JR`, `THA`, `LSP`, `PT`, `TS`) because the installer maps them directly to service names.

Adjust TON node arguments as required:

```bash
set_node_argument --threads 4
set_node_argument --metrics-port 40000
set_node_argument --state-ttl 604800
```

Append `-d` to remove an argument (for example `set_node_argument --state-ttl -d`). Exit the installer with `exit` once you finish.

:::caution Service changes restart components
Installer actions and `set_node_argument` updates restart TON services. Schedule maintenance windows, snapshot the node first, and test new parameters on testnet before applying them in production.
:::

### Monitor health and configuration

Run these checks whenever you change the node configuration or bring services online:

- `status` — full validator status, election metadata, shard counts, wallet balances, and system metrics.
- `status fast` — lighter variant that skips slow remote queries (ideal right after restarts).
- `mode_status` — list every MyTonCtrl mode (`validator`, `liteserver`, `nominator-pool`, `single-nominator`, `liquid-staking`, `collator`, `alert-bot`, `prometheus`, etc.) with its on/off state.
- `settings_status` — show each configurable key with its default and current value.
- `get <SETTING>` / `set <SETTING> <VALUE> [--force]` — inspect or change persistent configuration; set `<SETTING>` to names such as `stake` or `validatorId` and `<VALUE>` to the target value.
- `enable_mode <MODE>` / `disable_mode <MODE>` — toggle high-level features. Use `<MODE>` names such as `validator`, `liteserver`, or `nominator-pool`; conflicting modes enforce mutual exclusion.

Capture logs from `/var/ton-work/log` and `/var/ton-work/db/log` before restarting services so you can debug regressions.

### Manage wallets and Toncoin flows

Most advanced roles require at least one local wallet. MyTonCtrl exposes the following commands:

| Command | Purpose |
| --- | --- |
| `wl` | List wallets with balance, status, version, workchain, and address.
| `nw [<WORKCHAIN_ID> <WALLET_NAME> [version [subwallet]]]` | Create a new wallet; set `<WORKCHAIN_ID>` (mainnet defaults to `0`) and `<WALLET_NAME>` to a local alias before choosing optional contract parameters.
| `aw <WALLET_NAME>` | Activate a wallet after funding it; replace `<WALLET_NAME>` with the alias returned by `nw` or `wl` (`aw all` checks every wallet).
| `iw <WALLET_ADDRESS> <SECRET_KEY_B64>` | Import a wallet using its user-friendly `<WALLET_ADDRESS>` and Base64-encoded `<SECRET_KEY_B64>` secret key.
| `ew <WALLET_NAME>` | Display the wallet address and Base64 secret key for offline backup for the specified `<WALLET_NAME>`.
| `swv <WALLET_ADDRESS> <VERSION>` | Override the detected wallet contract version by pairing the `<WALLET_ADDRESS>` with the desired `<VERSION>` number.
| `mg <WALLET_NAME> <DESTINATION_ADDRESS> <TON_AMOUNT>` | Send Toncoin from `<WALLET_NAME>` to `<DESTINATION_ADDRESS>`; set `<TON_AMOUNT>` to `all`, `alld`, or a numeric value (combine with optional flags like `-C "Comment"`).
| `mgtp <WALLET_NAME> <DESTINATION_ADDRESS> <TON_AMOUNT>` | Move funds through temporary proxy wallets using the same `<WALLET_NAME>`, `<DESTINATION_ADDRESS>`, and `<TON_AMOUNT>` parameters as `mg`.
| `dw <WALLET_NAME>` | Delete the local wallet copy after confirmation for the selected `<WALLET_NAME>`.

:::warning Wallet exports expose private keys
`ew` prints the Base64 secret key. Run it only on secure, private terminals, store the output offline, and rehearse the workflow with testnet wallets before touching production funds.
:::

Example transfer inside the console:

```bash
mg wallet_001 EQD... 250 -C "Elections"
```

### Backups and recovery

Protect your configuration and keys before every major change:

- `create_backup [<ARCHIVE_NAME>] [-u <USER>]` — snapshot state into a compressed archive; provide `<ARCHIVE_NAME>` to name the file and `-u <USER>` when running as another Linux account.
- `restore_backup <ARCHIVE_NAME> [-y] [--skip-create-backup] [-u <USER>]` — restore a snapshot (with an optional pre-restore backup); pass the archive filename as `<ARCHIVE_NAME>` and reuse `-u <USER>` if root privileges are delegated.

Both commands run privileged scripts and may take a few minutes on slower disks.

### Optional tooling for any node

- `add_custom_overlay <OVERLAY_NAME> <PATH_TO_CONFIG>` / `list_custom_overlays` / `delete_custom_overlay <OVERLAY_NAME>` — manage custom overlays; use `<OVERLAY_NAME>` as a friendly label and point `<PATH_TO_CONFIG>` to the JSON definition (entries containing `@validators` deploy after the next election).
- `vas <ACCOUNT_ADDRESS>` / `vah <ACCOUNT_ADDRESS> <LIMIT>` — inspect account state and recent transactions for `<ACCOUNT_ADDRESS>`; add `<LIMIT>` to cap the number of transactions returned.
- `nb <BOOKMARK_NAME> <ACCOUNT_ADDRESS>`, `bl`, `db <BOOKMARK_NAME>` — maintain local bookmarks, pairing `<BOOKMARK_NAME>` with the corresponding `<ACCOUNT_ADDRESS>`.
- `benchmark` — run fio/RocksDB storage benchmarks to validate performance targets.
- `set sendTelemetry false` — opt out of sending validator statistics to Toncenter if your compliance policy requires it.

Use these utilities from any role to keep your node responsive and observable.

## Enabling validator mode

### Prerequisites

- A fully provisioned node as described in Setting up a node.
- A funded validator wallet (≥400 TON is a typical buffer to cover stake, fees, and gas).
- No conflicting modes (`liteserver` must be disabled before enabling `validator`).
- Up-to-date `global.config.json` and consensus keys.

### Turn on validator mode

Disable conflicting modes before enabling the validator workflow (skip `disable_mode collator` if you never activated collator mode):

```bash
disable_mode liteserver
disable_mode collator
```

Enable validator mode and confirm it is active:

```bash
enable_mode validator
mode_status
```

Review validator-specific settings to ensure thresholds are correct:

```bash
about validator
settings_status
```

### Participate in elections

MyTonCtrl automates most validator tasks once the mode is active:

```bash
set stake 300000
status fast
ve
check_ef
```

Adjust the stake value to match your Toncoin reserves or use `set stakePercent 99` to stake a percentage of available funds. Run `status fast` to confirm sync, `ve` to update validator state and submit the election query, and `check_ef` to monitor efficiency.

Additional validator commands:

- `vo <OFFER_HASH>` — download governance data and vote for configuration proposals using the `<OFFER_HASH>` reported in `status` or `ol` output.
- `vc <ELECTION_ID> <COMPLAINT_HASH>` — vote on validator complaints by pairing the `<ELECTION_ID>` with the related `<COMPLAINT_HASH>` value.
- `vl [past] [fast] [--json]` — inspect validator lists; add `past` to review the previous round.

### Manage nominator pools {#nominator-pool-mode}

Enable the `nominator-pool` mode when you act as a pool operator:

```bash
enable_mode nominator-pool
set stake 0
new_pool <POOL_NAME> <WORKCHAIN_ID> <FEE_PERCENT> <MIN_STAKE_TON> <MAX_STAKE_TON>
activate_pool <POOL_NAME>
update_validator_set <POOL_ADDRESS>
deposit_to_pool <POOL_ADDRESS> <TON_AMOUNT>
withdraw_from_pool <POOL_ADDRESS> <TON_AMOUNT>
```

Use `<POOL_NAME>` for the local alias, `<WORKCHAIN_ID>` for the target workchain (usually `0`), `<FEE_PERCENT>` for the operator commission, and `<MIN_STAKE_TON>`/`<MAX_STAKE_TON>` to bound delegations. `<POOL_ADDRESS>` is the pool smart-contract address and `<TON_AMOUNT>` is the Toncoin amount you deposit or withdraw.

Use `pools_list`, `get_pool_data <POOL_NAME>`, and `import_pool <POOL_NAME> <POOL_ADDRESS>` to audit existing pools. Follow the [nominator pool guide](https://docs.ton.org/v3/guidelines/smart-contracts/howto/nominator-pool) for policy details and staking policies.

### Manage single nominator pools {#single-nominator-mode}

Switch to `single-nominator` mode when you operate on behalf of a single delegator:

```bash
enable_mode single-nominator
new_single_pool <POOL_NAME> <POOL_ADDRESS>
activate_single_pool <POOL_NAME>
withdraw_from_single_pool <POOL_ADDRESS> <TON_AMOUNT>
```

In this mode, `<POOL_NAME>` is the local alias you manage, `<POOL_ADDRESS>` is the single-nominator contract address, and `<TON_AMOUNT>` is the Toncoin amount returned to the delegator.

### Manage collator operations

Once `collator` mode is enabled, control shard assignments directly:

- `add_collator <ADNL_ID> <SHARD_ID> [--self-collate true|false] [--select-mode random|ordered|round_robin]` — register a collator by supplying its `<ADNL_ID>` and the target `<SHARD_ID>` (hex or decimal).
- `delete_collator [<SHARD_ID>] <ADNL_ID>` — remove the collator identified by `<ADNL_ID>`; scope the removal to `<SHARD_ID>` when needed.
- `print_collators [--json]`
- `reset_collators`

These commands adjust the collator list stored in `validator-engine-console`.

### BTC Teleport helpers

Upgrades reinstall BTC Teleport by default. Validators can manage it manually:

- `remove_btc_teleport [--force]`
- `vote_offer_btc_teleport <OFFER_HASH>` — vote for the offer identified by `<OFFER_HASH>`.
- `print_offers_btc_teleport_list [--json]`

### Governance and troubleshooting

- `ol [--json] [hash]` / `od <OFFER_HASH>` — audit proposals before voting; pass `<OFFER_HASH>` from the governance feed when downloading details.
- `el [past] [--json]` / `cl [past] [--json]` — inspect election entries and complaints.
- `status fast`, `mode_status`, `settings_status`, and `benchmark` — routine health checks every time you adjust stake or keys.

## Enabling liteserver mode

### When to use it

Liteserver mode exposes lite-server endpoints without running validator logic. Typical use cases include explorers, API providers, or infrastructure that serves light client queries. Because `liteserver` conflicts with `validator`, choose one workflow or run separate machines for each role.

### Switch a node into liteserver mode

Disable validator-specific modes before switching roles:

```bash
disable_mode validator
disable_mode nominator-pool
disable_mode single-nominator
```

Enable the liteserver workflow and verify it is active:

```bash
enable_mode liteserver
mode_status
```

Open the installer to configure services for liteserver access:

```bash
installer
```

Inside the installer shell, deploy the components you need and review the generated config:

```bash
enable LS
enable LSP
plsc
exit
```

`LS` deploys the lite-server systemd service and `LSP` enables the optional ls-proxy. `plsc` prints the lite-server config you distribute to clients. Distribute `/var/ton-work/keys/liteserver.pub` and the generated `config.json`, then use `status fast` and `mode_status` to confirm the node stays in sync. Combine with `vas`, `vah`, or custom overlays when you need to inspect state on behalf of clients.

### Hardening recommendations

- Restrict lite-server access to trusted IP ranges.
- Monitor `netLoadAvg` and disk usage from the `status` output to scale hardware ahead of demand.
- Keep a warm backup by running `create_backup` after configuration changes and store keys securely offline.

## Enabling archive node mode

### What archive mode means

Archive nodes retain all historical states and blocks instead of pruning older data. They are required for explorers, analytics, and any workflow that replays historical transactions. Archive retention is controlled by node arguments such as `--archive-ttl` and `--state-ttl`.

### Configure archive retention

1. Size your hardware according to the [official guidelines](https://docs.ton.org/guidelines/nodes-guidelines) (multiple terabytes of NVMe storage are recommended).

2. Update the node arguments through MyTonInstaller:

   ```bash
   installer
   set_node_argument --archive-ttl 0
   set_node_argument --state-ttl 0
   exit
   ```

   Replace `0` with retention values (in seconds) that match your storage budget if you do not need a permanent archive.

3. Restart services if prompted and monitor disk growth:

   ```bash
   status fast
   settings_status
   ```

4. Schedule regular snapshots with `create_backup` and replicate them to cold storage so you can recover from hardware failures.

### Serve archive data

Combine archive retention with the mode that fits your audience:

- Validators can keep `validator` mode enabled while retaining archive data for on-chain investigations.
- Liteserver nodes can pair archive retention with `enable_mode liteserver` to answer historical queries from light clients.

Document access procedures for your team and keep the node patched by running `update`/`upgrade` after each release.
