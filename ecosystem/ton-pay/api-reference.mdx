---
title: "API reference"
sidebarTitle: "API reference"
---

import { Aside } from "/snippets/aside.jsx";

TypeScript exports for the TON Pay SDK packages `@ton-pay/api` and `@ton-pay/ui-react`. To install the packages, use:

```bash
npm install @ton-pay/api @ton-pay/ui-react
```

## Imports

```ts
// API helpers
import {
  createTonPayTransfer,
  getTonPayTransferByBodyHash,
  getTonPayTransferByReference,
  type CompletedTonPayTransferInfo,
  type CreateTonPayTransferParams,
  type CreateTonPayTransferResponse,
} from "@ton-pay/api";

// React UI
import { TonPayButton, useTonPay } from "@ton-pay/ui-react";
```

## Functions

### `createTonPayTransfer(params, options?)`

Builds a canonical message and returns tracking identifiers.

- `params`: `CreateTonPayTransferParams`.
- `options`: `APIOptions`.
- `options.chain`: `mainnet | testnet`.

### `getTonPayTransferByBodyHash(bodyHash, options?)`

Fetches a transfer by Base64 hash of the signed message body content (payload).

- `bodyHash`: Base64 hash of the signed message body content (payload); use `bodyBase64Hash` from `createTonPayTransfer`.
- `options`: `APIOptions`.
- Returns `CompletedTonPayTransferInfo`.

### `getTonPayTransferByReference(reference, options?)`

Fetches a transfer by reference.

- `reference`: use the `reference` returned by `createTonPayTransfer`.
- `options`: `APIOptions`.
- Returns `CompletedTonPayTransferInfo`.

### `useTonPay(options?)`

A React hook that connects a wallet through [TON Connect](/ecosystem/ton-connect/overview) and sends a transaction.

- `pay(getMessage)`: receives `senderAddr`, requests `{ message }` from the factory, and sends through TON Connect. Resolves `{ txResult, ...factoryReturn }`.

### `TonPayButton`

Prebuilt button that handles wallet connect or disconnect flow and calls `handlePay`.

## Types (`@ton-pay/api`)

### `CreateTonPayTransferParams`

Request payload for `createTonPayTransfer`.

```ts
type CreateTonPayTransferParams = {
  amount: number;
  asset: string;
  recipientAddr?: string;
  senderAddr: string;
  queryId?: number;
  commentToSender?: string;
  commentToRecipient?: string;
};
```

`amount` is specified in asset units; precision follows the asset decimals, e.g., TON uses 9, USDT uses 6.

### `CreateTonPayTransferResponse`

```ts
type CreateTonPayTransferResponse = {
  message: { address: string; amount: string; payload: string };
  bodyBase64Hash: string;
  reference: string;
};
```

### `CompletedTonPayTransferInfo`

```ts
type CompletedTonPayTransferInfo = {
  amount: string;
  rawAmount: string;
  senderAddr: string;
  recipientAddr: string;
  asset: string;
  assetTicker?: string;
  status: string;
  reference: string;
  bodyBase64Hash: string;
  txHash: string;
  traceId: string;
  commentToSender?: string;
  commentToRecipient?: string;
  date: string;
  errorCode?: number;
  errorMessage?: string;
};
```

- `status` is one of `pending`, `completed`, or `failed`;
- `errorCode` maps to TON Pay error codes in [Check status and retrieve info](/ecosystem/ton-pay/payment-integration/status-info).

### `APIOptions`

```ts
type APIOptions = {
  chain: "mainnet" | "testnet";
};
```

<Aside type="note">
  Defaults to `mainnet`.
</Aside>

## Constants (`@ton-pay/api`)

```ts
import { TON, USDT } from "@ton-pay/api";
// TON: the string constant "TON" (use for TON coin transfers)
// USDT: mainnet USDT jetton master address
```

<Aside type="tip">
  Asset constants map to mainnet addresses and are not affected by the `chain` option. For testnet, pass the correct jetton master address explicitly in `asset`.
</Aside>

## Errors

All API helpers throw `Error` with an HTTP `cause` if the network call fails. For example, `createTonPayTransfer` throws "Failed to create TON Pay transfer".

## Peer dependencies

- [`@tonconnect/ui-react`](https://www.npmjs.com/package/@tonconnect/ui-react) â€” React UI kit for TON Connect SDK
- [React 18](https://react.dev/) or later and `react-dom` 18 or later
