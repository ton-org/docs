---
title: "TonPay button using React"
sidebarTitle: "Button React"
description: "A complete payment button component with wallet connection and customizable styling."
---

`TonPayButton` is a ready-to-use React component that handles wallet connection and payment flow with configurable styling for TON payments.

## Objective

- Add a TON Pay button to a React app.
- Send a transfer using `@ton-pay/api` and `@ton-pay/ui-react`.

## Prerequisites (prerequisite versions for Node.js and React are not stated in the source and may be inaccurate)

- [Node.js](https://nodejs.org/en/download/) 18 or later LTS.
- A React app using React 18+.
- A testnet wallet funded with TON (see [How to get coins on testnet](/ecosystem/wallet-apps/get-coins)).

## Install packages

<Steps>
<Step title="Install dependencies">

```bash
npm install @ton-pay/ui-react @ton-pay/api @tonconnect/ui-react
```
<Info>
  `@ton-pay/api` is required when building transfer messages with `createTonPayTransfer`.
</Info>
</Step>

<Step title="Create a TON Connect manifest">
  Create `tonconnect-manifest.json` in the app public directory.

```json
{
  "url": "<APP_URL>",
  "name": "<APP_NAME>",
  "iconUrl": "<APP_ICON_URL>"
}
```

<Info>
  Manifest format: [TON Connect manifest](/ecosystem/ton-connect/manifest).
</Info>
</Step>

<Step title="Wrap the app with the provider">
  Wrap the root component with `TonConnectUIProvider`.

```tsx
import { TonConnectUIProvider } from "@tonconnect/ui-react";

function App() {
  return (
    <TonConnectUIProvider manifestUrl="/tonconnect-manifest.json">
      <AppRoutes />
    </TonConnectUIProvider>
  );
}
```
</Step>
</Steps>

Placeholders:
`<APP_URL>` - public HTTPS URL of the app.
`<APP_NAME>` - display name shown in the wallet.
`<APP_ICON_URL>` - public HTTPS URL of the app icon.

<Info>
  Use HTTPS in production. TON Connect may reject HTTP manifests.
</Info>

### Option 1: use useTonPay hook (recommended)

The `useTonPay` hook simplifies wallet connection and transaction handling. Use it for a direct integration path.

<Steps>
<Step title="Import required dependencies">
```tsx
import { TonPayButton } from "@ton-pay/ui-react";
import { useTonPay } from "@ton-pay/ui-react";
import { createTonPayTransfer } from "@ton-pay/api";
import { useState } from "react";
```
</Step>

<Step title="Set up the component">
```tsx
function PaymentComponent() {
  const { pay } = useTonPay();
  const [isLoading, setIsLoading] = useState(false);
```
</Step>

<Step title="Create the payment handler">
```tsx
  const handlePayment = async () => {
    setIsLoading(true);
    try {
      const { txResult, reference, bodyBase64Hash } = await pay(
        async (senderAddr: string) => {
          // Build the payment message
          const { message, reference, bodyBase64Hash } =
            await createTonPayTransfer(
              {
                amount: 3.5,
                asset: "TON",
                recipientAddr: "EQC...RECIPIENT",
                senderAddr,
                commentToSender: "Order #12345",
              },
              { chain: "mainnet" } // can be changed to testnet
            );
          return { message, reference, bodyBase64Hash };
        }
      );

      console.log("Payment sent:", txResult);
      console.log("Tracking:", reference, bodyBase64Hash);
    } catch (error) {
      console.error("Payment failed:", error);
    } finally {
      setIsLoading(false);
    }
  };
```

<Tip>
  The `useTonPay` hook automatically checks wallet connection. If the user isn't connected, it will open TON Connect modal first.
</Tip>
</Step>

<Step title="Render the button">
```tsx
  return (
    <TonPayButton
      handlePay={handlePayment}
      isLoading={isLoading}
      loadingText="Processing payment..."
    />
  );
}
```
</Step>
</Steps>

<Info>
  `useTonPay` opens TON Connect modal if no wallet is connected.
</Info>

## Option 2: use TON Connect directly

Use TON Connect hooks directly when full control over the connection flow is required.

<Steps>
<Step title="Import TonConnect hooks">
```tsx
import { TonPayButton } from "@ton-pay/ui-react";
import {
  useTonAddress,
  useTonConnectModal,
  useTonConnectUI,
} from "@tonconnect/ui-react";
import { createTonPayTransfer } from "@ton-pay/api";
import { useState } from "react";
```
</Step>

<Step title="Set up hooks and state">
```tsx
function DirectPaymentComponent() {
  const address = useTonAddress(true);
  const modal = useTonConnectModal();
  const [tonConnectUI] = useTonConnectUI();
  const [isLoading, setIsLoading] = useState(false);
```
</Step>

<Step title="Create the payment handler">
```tsx
  const handlePay = async () => {
    // Check if wallet is connected
    if (!address) {
      modal.open();
      return;
    }

    setIsLoading(true);
    try {
      // Create the payment message
      const { message } = await createTonPayTransfer(
        {
          amount: 1.2,
          asset: "TON",
          recipientAddr: "EQC...RECIPIENT",
          senderAddr: address,
          commentToSender: "Invoice #5012",
        },
        { chain: "mainnet" } // can be changed to testnet
      );

      // Send the transaction
      await tonConnectUI.sendTransaction({
        messages: [message],
        validUntil: Math.floor(Date.now() / 1000) + 5 * 60,
        from: address,
      });

      console.log("Payment completed!");
    } catch (error) {
      console.error("Payment failed:", error);
    } finally {
      setIsLoading(false);
    }
  };
```
</Step>

<Step title="Render the button">
```tsx
  return <TonPayButton handlePay={handlePay} isLoading={isLoading} />;
}
```
</Step>
</Steps>

## TonPayButton props

All props are optional except `handlePay`.

| Prop | Type | Default | Description |
| --- | --- | --- | --- |
| `handlePay` | `() => Promise<void>` | required | Payment handler called when the button is selected. |
| `isLoading` | `boolean` | `false` | Shows a loading spinner and disables the button. |
| `variant` | `"long"` \| `"short"` | `"long"` | Button text variant: "Pay with TON Pay" (long) or "TON Pay" (short). |
| `preset` | `"default"` \| `"gradient"` | - | Predefined theme preset (overrides `bgColor` and `textColor`). |
| `onError` | `(error: unknown) => void` | - | Called when `handlePay` throws. A built-in error popup is also shown unless `showErrorNotification` is `false`. |
| `showErrorNotification` | `boolean` | `true` | Shows the built-in error notification popup on error. |
| `bgColor` | `string` | `"#0098EA"` | Background color (hex) or CSS gradient. |
| `textColor` | `string` | `"#FFFFFF"` | Text and icon color (hex). |
| `borderRadius` | `number` \| `string` | `8` | Border radius in pixels or CSS value. |
| `fontFamily` | `string` | `"inherit"` | Font family for button text. |
| `width` | `number` \| `string` | `300` | Button width in pixels or CSS value. |
| `height` | `number` \| `string` | `44` | Button height in pixels or CSS value. |
| `loadingText` | `string` | `"Processing..."` | Text shown during loading state. |
| `showMenu` | `boolean` | `true` | Shows the dropdown menu with wallet actions. |
| `disabled` | `boolean` | `false` | Disables the button. |
| `style` | `Record<string, any>` | - | Additional inline styles. |
| `className` | `string` | - | Additional CSS class name. |

## Features

<CardGroup cols={2}>
  <Card title="Customization options" icon="palette">
    Control colors, gradients, border radius, and fonts.
  </Card>
  <Card title="Presets" icon="wand-magic-sparkles">
    Preset themes aligned with the default design.
  </Card>
  <Card title="Wallet actions" icon="wallet">
    Connect, disconnect, and copy addresses from the menu.
  </Card>
  <Card title="Loading states" icon="spinner">
    Spinner and configurable loading text.
  </Card>
  <Card title="Responsive sizing" icon="mobile">
    Set size with numbers or CSS values.
  </Card>
  <Card title="Defaults" icon="bolt">
    Default styles apply when no options are set.
  </Card>
</CardGroup>

## Customization

### Button variants

See [Option 1: use `useTonPay`](/ecosystem/ton-pay/ui-integration/button-react#option-1:-using-usetonpay-hook-recommended) for a complete example.

<CodeGroup>
```tsx Long Variant (Default)
<TonPayButton
  variant="long"
  handlePay={handlePay}
/>
// Displays: "Pay with [TON icon] Pay"
```

```tsx Short Variant
<TonPayButton
  variant="short"
  handlePay={handlePay}
/>
// Displays: "[TON icon] Pay"
```
</CodeGroup>

### Presets

See [Option 1: use `useTonPay`](/ecosystem/ton-pay/ui-integration/button-react#option-1:-using-usetonpay-hook-recommended) for a complete example.

<CodeGroup>
```tsx Default Preset
<TonPayButton
  preset="default"
  handlePay={handlePay}
/>
// Blue theme: #0098EA
```

```tsx Gradient Preset
<TonPayButton
  preset="gradient"
  handlePay={handlePay}
/>
// Gradient: #2A82EB to #0355CF
```
</CodeGroup>

### Custom styling

See [Option 1: use `useTonPay`](#option-1-use-usetonpay) for a complete example.

```tsx
<TonPayButton
  bgColor="#7C3AED"
  textColor="#FFFFFF"
  borderRadius={12}
  width={400}
  height={56}
  fontFamily="'Inter', sans-serif"
  handlePay={handlePay}
/>
```

<Tip>
  You can use CSS gradients in `bgColor`, for example: `"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"`.
</Tip>

### Button states

See [Option 1: use `useTonPay`](#option-1-use-usetonpay) for a complete example.

```tsx
<TonPayButton
  handlePay={handlePay}
  isLoading={isLoading}
  loadingText="Processing payment..."
  disabled={cartTotal === 0}
  showMenu={false}
/>
```

## Advanced patterns

### Error handling

```tsx
import { TonPayButton, useTonPay } from "@ton-pay/ui-react";
import { createTonPayTransfer } from "@ton-pay/api";
import { useState } from "react";

function PaymentWithErrors() {
  const { pay } = useTonPay();
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handlePayment = async () => {
    setIsLoading(true);
    setError(null);

    try {
      await pay(async (senderAddr: string) => {
        const { message, reference, bodyBase64Hash } =
          await createTonPayTransfer(
            {
              amount: 5.0,
              asset: "TON",
              recipientAddr: "<RECIPIENT_ADDR>",
              senderAddr,
            },
            { chain: "testnet" }
          );
        return { message, reference, bodyBase64Hash };
      });
      // Show success message...
    } catch (err: any) {
      setError(err.message || "Payment failed. Please try again.");
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div>
      <TonPayButton handlePay={handlePayment} isLoading={isLoading} />
      {error && <div style={{ color: "red" }}>{error}</div>}
    </div>
  );
}
```

#### Built-in error notification

`TonPayButton` catches errors thrown from `handlePay` and shows a notification popup with the error message.

If a custom error UI is also rendered, both messages appear. Use either the built-in popup or a custom UI, but not both.

#### Add a custom error handler

Use `onError` for logging or custom notifications. Set `showErrorNotification={false}` to disable the built-in popup.

```tsx
import { TonPayButton, useTonPay } from "@ton-pay/ui-react";
import { createTonPayTransfer } from "@ton-pay/api";
import { useState } from "react";

function PaymentWithCustomHandler() {
  const { pay } = useTonPay();
  const [isLoading, setIsLoading] = useState(false);

  const handlePayment = async () => {
    setIsLoading(true);
    try {
      await pay(async (senderAddr: string) => {
        const { message } = await createTonPayTransfer(
          {
            amount: 3,
            asset: "TON",
            recipientAddr: "<RECIPIENT_ADDR>",
            senderAddr,
          },
          { chain: "testnet" }
        );
        return { message };
      });
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <TonPayButton
      handlePay={handlePayment}
      isLoading={isLoading}
      onError={(error) => {
        analytics.track("payment_error", {
          message: (error as any)?.message ?? String(error),
        });
        // Your own toast/notification can go here
      }}
      showErrorNotification={false}
    />
  );
}
```

#### Replace the popup with a custom UI

Catch errors inside `handlePay` and do not rethrow. When `handlePay` resolves, the button does not show the default popup.

```tsx
import { TonPayButton, useTonPay } from "@ton-pay/ui-react";
import { createTonPayTransfer } from "@ton-pay/api";
import { useState } from "react";

function PaymentWithOwnUI() {
  const { pay } = useTonPay();
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handlePayment = async () => {
    setIsLoading(true);
    setError(null);
    try {
      await pay(async (senderAddr: string) => {
        const { message } = await createTonPayTransfer(
          {
            amount: 2.5,
            asset: "TON",
            recipientAddr: "<RECIPIENT_ADDR>",
            senderAddr,
          },
          { chain: "testnet" }
        );
        return { message };
      });
    } catch (e: any) {
      // Handle the error here and DO NOT rethrow
      setError(e?.message ?? "Payment failed. Please try again.");
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div>
      <TonPayButton handlePay={handlePayment} isLoading={isLoading} />
      {error && <div style={{ color: "red" }}>{error}</div>}
    </div>
  );
}
```

## Server-side payment creation

Create the payment message on a backend to store tracking identifiers and validate parameters before sending.

<Steps>
<Step title="Create a backend endpoint">
  Build an endpoint that returns the message for `TonPayButton`.

```ts
// /api/create-payment
app.post("/api/create-payment", async (req, res) => {
  const { amount, senderAddr, orderId } = req.body;

  const { message, reference, bodyBase64Hash } = await createTonPayTransfer(
    {
      amount,
      asset: "TON",
      recipientAddr: "<RECIPIENT_ADDR>",
      senderAddr,
      commentToSender: `Order ${orderId}`,
    },
    { chain: "testnet" }
  );

  // Store reference and bodyBase64Hash in your database
  await db.savePayment({ orderId, reference, bodyBase64Hash });

  res.json({ message });
});
```
</Step>

<Step title="Call the endpoint from the frontend">

```tsx
import { TonPayButton, useTonPay } from "@ton-pay/ui-react";
import { useState } from "react";

function ServerSidePayment() {
  const { pay } = useTonPay();
  const [isLoading, setIsLoading] = useState(false);

  const handlePayment = async () => {
    setIsLoading(true);
    try {
      await pay(async (senderAddr: string) => {
        const response = await fetch("/api/create-payment", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            amount: 10.5,
            senderAddr,
            orderId: "<ORDER_ID>",
          }),
        });
        const data = await response.json();
        return { message: data.message };
      });
    } finally {
      setIsLoading(false);
    }
  };

  return <TonPayButton handlePay={handlePayment} isLoading={isLoading} />;
}
```
</Step>
</Steps>

<Tip>
  Server-side payment creation allows tracking identifiers to be stored and payment parameters to be validated before sending.
</Tip>

## Test the integration

Run the interactive button showcase to test variants and styling.

```bash
npm run test:button-react
# or
bun test:button-react
```

<Warning>
  Use `chain: "testnet"` during development to avoid spending TON.
</Warning>

## Best practices

<AccordionGroup>
  <Accordion title="Handle errors">
    Wrap payment calls in try-catch blocks and display user-friendly error messages. Network issues and cancellations are common.
  </Accordion>

  <Accordion title="Show loading states">
    Set `isLoading={true}` during payment processing to prevent double submissions and provide visual feedback.
  </Accordion>

  <Accordion title="Validate before payment">
    Verify cart totals, user input, and business rules before calling the payment handler.
  </Accordion>

  <Accordion title="Test on testnet first">
    Use `chain: "testnet"` during development. Switch to `"mainnet"` only after validation.
  </Accordion>

  <Accordion title="Store tracking identifiers">
    Save `reference` and `bodyBase64Hash` to track payment status via webhooks. See [Webhooks](/ecosystem/ton-pay/webhooks).
  </Accordion>

  <Accordion title="Provide success feedback">
    After successful payment, show a confirmation message, redirect to a success page, or update the UI.
  </Accordion>
</AccordionGroup>

## Related resources

<CardGroup cols={2}>
  <Card
    title="Send payments using React"
    icon="send"
    href="/ecosystem/ton-pay/payment-integration/payments-react"
  >
    End-to-end React integration overview.
  </Card>
  <Card
    title="Build a transfer"
    icon="money-bill-transfer"
    href="/ecosystem/ton-pay/payment-integration/transfer"
  >
    Create payment messages with `createTonPayTransfer`.
  </Card>
  <Card title="Webhooks" icon="webhook" href="/ecosystem/ton-pay/webhooks">
    Track payment status with webhooks.
  </Card>
  <Card
    title="TON Connect overview"
    icon="plug"
    href="/ecosystem/ton-connect/overview"
  >
    Protocol overview and wallet connection flow.
  </Card>
</CardGroup>
