---
title: "How to add a TON Pay button with JavaScript"
sidebarTitle: "Add TON Pay button using JS"
description: "Framework-agnostic payment button that works with JavaScript, HTML, and any web framework."
---

import { Aside } from "/snippets/aside.jsx";

Add TON Pay button to a plain HTML/JavaScript page using the embed script or TON Pay client. The embed script works without build tools or frameworks.

<Aside type="caution">
  Mainnet transfers are irreversible. Use `chain: "testnet"` during development and switch to `"mainnet"` only after validation.
</Aside>

## Installation

<Steps>
<Step title="Choose an installation method">
  Use npm, CDN, or copy the bundle to the project.

**Option A: npm**
```bash
npm install @ton-pay/ui @tonconnect/ui
```

**Option B: CDN** (no installation needed)
```html
<!-- Use unpkg CDN directly in your HTML -->
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js"></script>
```

**Option C: Copy to the project**
After npm install, copy `node_modules/@ton-pay/ui/dist/ton-pay-embed.js` to a public assets folder.
</Step>

<Step title="Create a TON Connect manifest">
  Create a `tonconnect-manifest.json` file and host it on a public HTTPS URL.

```json
{
  "url": "<APP_URL>",
  "name": "<APP_NAME>",
  "iconUrl": "<APP_ICON_URL>"
}
```

<Info>
  Manifest format: [TON Connect manifest](/ecosystem/ton-connect/manifest).
</Info>
</Step>
</Steps>

Placeholders:
`<APP_URL>` - public HTTPS URL of the app.
`<APP_NAME>` - display name shown in the wallet.
`<APP_ICON_URL>` - public HTTPS URL of the app icon.

## Option 1: simple embed

Not runnable. Combine the snippets in this section into one HTML page.

Placeholders:
`<CONTAINER_ID>` - HTML element ID where the button is mounted.
`<CALLBACK_NAME>` - global function name invoked by the embed script.
`<RECIPIENT_ADDR>` - recipient wallet address.

<Steps>
<Step title="Add the container">

```html
<div id="<CONTAINER_ID>"></div>
```
</Step>

<Step title="Add the embed script">
  Add the script tag with configuration parameters.

```html
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?preset=gradient&variant=long&borderRadius=8&containerId=<CONTAINER_ID>&callback=<CALLBACK_NAME>"></script>
```
</Step>

<Step title="Add the import map">
  Add the import map for ES module support before other scripts.

```html
<script type="importmap">
{
  "imports": {
    "@tonconnect/ui": "https://esm.sh/@tonconnect/ui@2.0.9"
  }
}
</script>
```
</Step>

<Step title="Create the payment handler">

```html
<script type="module">
  import { createTonPay } from "https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-vanilla.mjs";

  // Initialize TonPay client
  const tonPay = createTonPay({
    manifestUrl: "/tonconnect-manifest.json"
  });

  // Define payment handler
  window["<CALLBACK_NAME>"] = async () => {
    try {
      const result = await tonPay.pay(async (senderAddr) => {
        // Build your payment message
        const message = {
          address: "<RECIPIENT_ADDR>",
          amount: "1000000", // 0.001 TON in nanotons
          payload: "dGVzdA==", // optional base64 payload
        };
        return { message };
      });

      console.log("Payment successful:", result.txResult);
      alert("Payment sent!");
    } catch (error) {
      console.error("Payment failed:", error);
      alert("Payment failed: " + error.message);
    }
  };
</script>
```
</Step>
</Steps>

<Info>
  The `callback` parameter in the embed script must match the global function name in the handler.
</Info>

## Option 2: use TON Pay client

Use `createTonPay` for custom UI and payment flow control.

Not runnable. Combine the snippets in this section into one HTML page.

<Steps>
<Step title="Set up the HTML">

```html
<!DOCTYPE html>
<html>
<head>
  <title>My TON Payment App</title>
  <script type="importmap">
  {
    "imports": {
      "@tonconnect/ui": "https://esm.sh/@tonconnect/ui@2.0.9"
    }
  }
  </script>
</head>
<body>
  <button id="pay-btn">Pay with TON</button>
  <div id="status"></div>
</body>
</html>
```
</Step>

<Step title="Import and initialize">

```html
<script type="module">
  import { createTonPay } from "https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-vanilla.mjs";

  const tonPay = createTonPay({
    manifestUrl: "/tonconnect-manifest.json",
    connectTimeoutMs: 300000 // 5 minutes (optional)
  });
</script>
```
</Step>

<Step title="Implement the payment logic">

```html
<script type="module">
  const payButton = document.getElementById("pay-btn");
  const statusDiv = document.getElementById("status");

  payButton.addEventListener("click", async () => {
    payButton.disabled = true;
    payButton.textContent = "Processing...";

    try {
      const result = await tonPay.pay(async (senderAddr) => {
        statusDiv.textContent = `Sending from ${senderAddr}...`;

        // Build payment message
        const message = {
          address: "<RECIPIENT_ADDR>",
          amount: "1000000",
        };

        return { message };
      });

      statusDiv.textContent = "Payment successful!";
      console.log("Transaction:", result.txResult);
    } catch (error) {
      statusDiv.textContent = "Payment failed: " + error.message;
      console.error(error);
    } finally {
      payButton.disabled = false;
      payButton.textContent = "Pay with TON";
    }
  });
</script>
```
</Step>
</Steps>

<Info>
  `createTonPay` opens TON Connect modal when `pay()` is called and no wallet is connected.
</Info>

## Create messages with createTonPayTransfer

Use `createTonPayTransfer` to build a canonical payment message with tracking identifiers.

Combine the snippets in this section into one HTML page.

<Steps>
<Step title="Add the API package script">

```html
<script type="module">
  import { createTonPayTransfer } from "https://unpkg.com/@ton-pay/api@latest/dist/index.mjs";
  import { createTonPay } from "https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-vanilla.mjs";
</script>
```
</Step>

<Step title="Use the API in the payment handler">

```html
<script type="module">
  const tonPay = createTonPay({
    manifestUrl: "/tonconnect-manifest.json"
  });

  window["<CALLBACK_NAME>"] = async () => {
    try {
      const result = await tonPay.pay(async (senderAddr) => {
        // Create payment with tracking
        const { message, reference, bodyBase64Hash } =
          await createTonPayTransfer(
            {
              amount: 3.5,
              asset: "TON",
              recipientAddr: "<RECIPIENT_ADDR>",
              senderAddr,
              commentToSender: "Order #12345",
            },
            { chain: "mainnet" }
          );

        // Store tracking identifiers
        console.log("Reference:", reference);
        console.log("Hash:", bodyBase64Hash);

        return { message, reference, bodyBase64Hash };
      });

      alert("Payment sent! Reference: " + result.reference);
    } catch (error) {
      alert("Payment failed: " + error.message);
    }
  };
</script>
```

<Aside type="caution">
  Mainnet transfers are irreversible. Use `chain: "testnet"` during development and switch to `"mainnet"` only after validation.
</Aside>

</Step>
</Steps>

<Info>
  Store `reference` and `bodyBase64Hash` to track payment status via webhooks. See [Webhooks](/ecosystem/ton-pay/webhooks).
</Info>

## Embed script parameters

| Parameter | Type | Default | Description |
| --- | --- | --- | --- |
| `containerId` | string | `"ton-pay-btn"` | Target element ID where the button renders. |
| `preset` | `"default"` \| `"gradient"` | - | Built-in theme preset. |
| `bgColor` | string | `"#0098EA"` | Background color (hex) or CSS gradient (URL-encoded). |
| `textColor` | string | `"#FFFFFF"` | Text and icon color. |
| `variant` | `"long"` \| `"short"` | `"long"` | Button text variant. |
| `text` | string | - | Custom button text (overrides `variant`). |
| `loadingText` | string | `"Processing..."` | Text shown during loading. |
| `borderRadius` | number | `8` | Border radius in pixels. |
| `fontFamily` | string | `"inherit"` | CSS font-family value. |
| `width` | number | `300` | Button width in pixels. |
| `height` | number | `44` | Button height in pixels. |
| `showMenu` | boolean | `true` | Show dropdown menu with wallet actions. |
| `callback` | string | - | Global function name called on click. |

### Examples

<CodeGroup>
```html Default Blue Button
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?preset=default&variant=long&borderRadius=8&containerId=btn-1&callback=handlePayment"></script>
```

```html Gradient Button
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?preset=gradient&variant=short&borderRadius=12&containerId=btn-2&callback=handlePayment"></script>
```

```html Custom Colors
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?bgColor=%23000000&textColor=%23FFFFFF&borderRadius=99&containerId=btn-3&callback=handlePayment"></script>
```

```html Custom Size
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?preset=gradient&width=400&height=56&containerId=btn-4&callback=handlePayment"></script>
```
</CodeGroup>

<Warning>
  URL-encode special characters in parameters. For example, `#` becomes `%23` in color values.
</Warning>

## TonPayEmbed API

The embed script exposes a global `TonPayEmbed` object for programmatic control.

### `TonPayEmbed.mount(config)`

Update button configuration dynamically.

```js
TonPayEmbed.mount({
  preset: "gradient",
  variant: "short",
  borderRadius: 12,
  width: 350
});
```

### `TonPayEmbed.setCallback(functionName)`

Change the callback function.

```js
TonPayEmbed.setCallback("newPaymentHandler");
```

### `TonPayEmbed.setAddress(address)`

Update the displayed wallet address in the menu.

```js
TonPayEmbed.setAddress("<RECIPIENT_ADDR>");
```

### `TonPayEmbed.click()`

Trigger a button click programmatically.

```js
TonPayEmbed.click();
```

### Example: dynamic configuration

```html
<div id="<CONTAINER_ID>"></div>
<button onclick="changeTheme()">Change Theme</button>

<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?containerId=<CONTAINER_ID>&callback=<CALLBACK_NAME>"></script>

<script>
  function changeTheme() {
    TonPayEmbed.mount({
      preset: "gradient",
      variant: "short",
      borderRadius: 99
    });
  }
</script>
```

## TonPay client API

`createTonPay` returns a client for wallet connection and payments.

### Properties

#### `address: string | null`

Current wallet address.

```js
const tonPay = createTonPay({ manifestUrl: "/tonconnect-manifest.json" });
console.log(tonPay.address); // null or wallet address
```

### Methods

#### `waitForWalletConnection(): Promise<string>`

Wait for a wallet connection and open the modal if needed.

```js
try {
  const address = await tonPay.waitForWalletConnection();
  console.log("Connected:", address);
} catch (error) {
  console.error("Connection failed:", error);
}
```

#### `pay(getMessage): Promise<PayResult>`

Execute a payment transaction.

```js
const result = await tonPay.pay(async (senderAddr) => {
  const message = {
    address: "<RECIPIENT_ADDR>",
    amount: "1000000"
  };
  return { message };
});

console.log(result.txResult);
```

#### `disconnect(): Promise<void>`

Disconnect the current wallet.

```js
await tonPay.disconnect();
```

## Best practices

<AccordionGroup>
  <Accordion title="Handle errors">
    Wrap payment calls in try-catch blocks and display clear error messages.
  </Accordion>

  <Accordion title="Show loading states">
    Update the UI during payment processing to prevent repeated clicks.
  </Accordion>

  <Accordion title="Validate before payment">
    Check amounts, addresses, and input before calling the payment function.
  </Accordion>

  <Accordion title="Use HTTPS in production">
    TON Connect requires HTTPS for the manifest URL and callbacks.
  </Accordion>

  <Accordion title="Store tracking identifiers">
    Save `reference` and `bodyBase64Hash` from `createTonPayTransfer` to track payments via webhooks.
  </Accordion>

  <Accordion title="Test thoroughly">
    Test with testnet first and handle error scenarios before going live.
  </Accordion>
</AccordionGroup>

## Framework integration

### WordPress

```html
<!-- Add to the theme footer or a custom HTML block -->
<div id="<CONTAINER_ID>"></div>
<script type="importmap">
{
  "imports": {
    "@tonconnect/ui": "https://esm.sh/@tonconnect/ui@2.0.9"
  }
}
</script>
<script type="module">
  import { createTonPay } from "https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-vanilla.mjs";
  const tonPay = createTonPay({ manifestUrl: "/tonconnect-manifest.json" });
  window["<CALLBACK_NAME>"] = async () => { /* your logic */ };
</script>
<script src="https://unpkg.com/@ton-pay/ui@latest/dist/ton-pay-embed.js?containerId=<CONTAINER_ID>&callback=<CALLBACK_NAME>"></script>
```

### Plain HTML/CSS/JS

Use the complete example from Option 1 in a single HTML file.

### Build tools (Webpack, Vite)

```js
import { createTonPay } from "@ton-pay/ui/vanilla";

const tonPay = createTonPay({
  manifestUrl: "/tonconnect-manifest.json"
});

// Use tonPay.pay() in event handlers
```

## Related resources

<CardGroup cols={2}>
  <Card
    title="Build a transfer"
    icon="money-bill-transfer"
    href="/ecosystem/ton-pay/payment-integration/transfer"
  >
    Create payment messages with `createTonPayTransfer`
  </Card>
  <Card title="Webhooks" icon="webhook" href="/ecosystem/ton-pay/webhooks">
    Track payment status with webhooks
  </Card>
  <Card
    title="React button"
    icon="react"
    href="/ecosystem/ton-pay/ui-integration/button-react"
  >
    Use TonPayButton in React apps
  </Card>
  <Card
    title="API reference"
    icon="code"
    href="/ecosystem/ton-pay/api-reference"
  >
    SDK types, functions, and options
  </Card>
</CardGroup>
