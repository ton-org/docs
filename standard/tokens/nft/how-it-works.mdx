---
title: "NFT: How it works"
sidebarTitle: "How it works"
---

import { Aside } from '/snippets/aside.jsx';

This article describes the basic ideas and processes behind the implementation of Non‑Fungible Tokens (NFTs) in the TON Blockchain, aligned with [TEP‑62](https://github.com/ton-blockchain/TEPs/blob/1fbc23cac69723c53251f686ec90d81bf0e83443/text/0062-nft-standard.md).

## Related smart contracts

Standardized NFTs on TON are implemented using a set of smart contracts, including:

- NFT collection smart contract
- NFT item smart contract

It is important to keep in mind that the NFT standard provides only a general interaction scheme, leaving specific implementation details to developers.

![NFT schema](/standard/tokens/nft/pictures/nftOverview.jpg)

### NFT collection

The collection is the source of truth for items. It deterministically derives each item's address by index and aggregates collection metadata.

### NFT item

Each NFT item is its own smart contract account. It exposes its collection address, index, current owner, and a part of metadata. On a valid transfer from the current owner, it updates the owner, optionally notifies the new owner, and returns excess Toncoin to the specified address. [Explanation of why one item equals one contract](/techniques/contract-sharding).

<Aside
  type="caution"
>
  Not every NFT that stores a collection address actually belongs to that collection. Verify that the collection returns the item's address for the item's index.
</Aside>


## Transfer NFT item

The current owner sends a transfer message to the NFT item contract. The item updates its owner field and, optionally, sends a notification and/or excess Toncoin to the specified addresses.

```mermaid
sequenceDiagram
  participant S as Sender (Current Owner)
  participant N as NFT item
  participant R as Recipient (New Owner)
  participant RD as Response Destination

  S->>N: transfer request
  N->>N: owner = new_owner
  alt forward_amount > 0
    N->>R: ownership_assigned
  else forward_amount == 0
    Note over N,R: No notification is sent
  end
  N->>RD: excesses(query_id)
```

Transfer message body contains the following data:

| Name                   | Type             | Description                                                                                                                      |
| ---------------------- | ---------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `query_id`             | uint 64          | Links transfer, ownership notification, and excesses together.                                                                   |
| `new_owner`            | MsgAddress       | Address that should receive ownership.                                                                                           |
| `response_destination` | maybe MsgAddress | Optional address to receive an excess Toncoin message, usually it is sender address.                                             |
| `custom_payload`       | maybe Cell       | Optional custom data passed to the NFT, can be used by higher‑level protocols. Typically, the NFT item does not read this field. |
| `forward_amount`       | VarUInteger 16   | Toncoin amount to forward to the new owner. If `> 0`, a notification with `forward_payload` will be sent.                        |
| `forward_payload`      | maybe Cell       | Optional payload delivered with the ownership notification.                                                                      |

Notes:

- If `forward_amount > 0`, the item sends an ownership notification (often named `ownership_assigned`) to `new_owner`.
- If there is remaining Toncoin after fees, the item sends an `excesses(query_id)` message to `response_destination` (if provided).

Forward payload formatting:

- If the first 32 bits of `forward_payload` equal `0x00000000`, the remainder is a text comment that wallets may display.
- If the comment begins with byte `0xff`, it is considered a binary comment and should not be displayed as plain text.
- If `forward_payload` carries a binary message for interaction with another contract (e.g. DEX), there are no special prefixes.

Ownership notification message body (`ownership_assigned`) contains the following data:

| Name              | Type       | Description                                                            |
| ----------------- | ---------- | ---------------------------------------------------------------------- |
| `query_id`        | uint 64    | Links transfer, ownership notification, and excesses together.         |
| `prev_owner`      | MsgAddress | Address of the previous owner of this NFT item.                        |
| `forward_payload` | Cell       | Optional data for the recipient. same formatting rules as above apply. |

Excess message body (`excesses`) contains the following data:

| Name       | Type    | Description                                                    |
| ---------- | ------- | -------------------------------------------------------------- |
| `query_id` | uint 64 | Links transfer, ownership notification, and excesses together. |

Note: `forward_amount` in NFTs is analogous in meaning to jetton's `forward_ton_amount` (different name, same idea: Toncoin forwarded with the notification).

Transfer must be rejected if:

1. The inbound message is not from the current owner.
1. There are not enough coins (considering storage fee guidelines) to process the operation and send `forward_amount`.
1. The contract cannot guarantee sending to `response_destination`.

Otherwise, the contract:

1. Change owner to `new_owner`.
1. If `forward_amount > 0`, send `ownership_assigned(query_id, prev_owner, forward_payload)` to `new_owner` with `forward_amount` attached.
1. Send `excesses(query_id)` to `response_destination` containing the remaining Toncoin of the inbound message.

## Best practices

- Metadata referenced by each link should be permanent. If you need to change it, send a transaction that updates the reference.
- Be mindful of TON’s asynchronous nature: on‑chain “current owner” reads may become stale by the time you act on them.
